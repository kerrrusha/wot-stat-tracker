<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en" th:replace="~{base :: layout(~{::body})}">
<head>
    <meta charset="UTF-8">
    <title>WoT Stat Tracker</title>

    <!--  for developing in browser view, safe to delete  -->
    <link th:href="@{/styles/stat.css}" href="../static/styles/stat.css" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,300" rel="stylesheet" type="text/css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
          rel="stylesheet"
          crossorigin="anonymous"
          th:href="@{/webjars/bootstrap/5.3.0/dist/css/bootstrap.min.css}">
</head>
<body>
<section class="px-5 py-3">
    <h3 class="display-3 mb-5 text-center" th:text="${player.getNickname()}">He_Cm0Tpu_CTaTucTuKy</h3>
    <div class="d-flex flex-row justify-content-center align-items-stretch mb-4">
        <div class="d-flex flex-column justify-content-between">
            <div class="d-flex flex-column text-start">
                <span class="subtitle">Battles</span>
                <span class="stat-value" th:text="${playerCurrentStat.getBattles()}">19,348</span>
                <span class="delta-plus" th:if="${statDeltas != null}" th:text="${statDeltas.getBattlesDeltaFormatted()}">+19</span>
            </div>
            <div class="d-flex flex-column text-start">
                <span class="subtitle">Avg Damage</span>
                <span class="stat-value" th:text="${playerCurrentStat.getAvgDamage()}">2,281</span>
                <span class="delta-plus" th:if="${statDeltas != null}" th:text="${statDeltas.getAvgDamageDeltaFormatted()}">+0.15</span>
            </div>
        </div>
        <div>
            <img src="https://eu-wotp.wgcdn.co/static/5.124.0_02ea99/wotp_static/img/user_profile/frontend/scss/img/rating-ribbon.png" alt="rating-ribbon"/>
            <div class="d-flex flex-column text-center">
                <span class="subtitle">Personal Rating</span>
                <span class="stat-value" th:text="${playerCurrentStat.getGlobalRating()}">11,062</span>
                <span class="delta-minus" th:if="${statDeltas != null}" th:text="${statDeltas.getRatingDeltaFormatted()}">-12</span>
            </div>
        </div>
        <div class="d-flex flex-column justify-content-between">
            <div class="d-flex flex-column text-end">
                <span class="subtitle">Winrate</span>
                <span class="stat-value" th:text="${playerCurrentStat.getWinrate()}">61.03%</span>
                <span class="delta-plus" th:if="${statDeltas != null}" th:text="${statDeltas.getWinrateDeltaFormatted()}">+0.05%</span>
            </div>
            <div class="d-flex flex-column text-end">
                <span class="subtitle">Avg Xp</span>
                <span class="stat-value" th:text="${playerCurrentStat.getAvgExperience()}">921.1</span>
                <span class="delta-plus" th:if="${statDeltas != null}" th:text="${statDeltas.getAvgExperienceDeltaFormatted()}">+0.023</span>
            </div>
        </div>
    </div>
    <div class="d-flex flex-row justify-content-between mb-5">
        <div>
            <span class="subtext">Last battle time: </span>
            <span class="text" th:text="${playerCurrentStat.getLastBattleTimeFormatted()}">14 June, at 22:00</span>
        </div>
        <div class="d-flex flex-column text-end">
            <div>
                <span class="subtext">Current data snapshot: </span>
                <span class="text" th:text="${playerCurrentStat.getCreatedTimeFormatted()}">14 June, at 22:00</span>
            </div>
            <div th:if="${statDeltas != null}">
                <span class="subtext">Compared to data snapshot: </span>
                <span class="text" th:text="${statDeltas.getPreviousStatCreationTimeFormatted()}">14 June, at 21:00</span>
            </div>
        </div>
    </div>
    <div class="d-flex flex-row justify-content-around mt-5">
        <div class="d-flex flex-column text-start">
            <span class="subtitle">WN7</span>
            <span class="stat-value" th:text="${playerCurrentStat.getWN7()}">1,137.5</span>
            <span class="delta-plus" th:if="${statDeltas != null}" th:text="${statDeltas.getWn7DeltaFormatted()}">+1.34</span>
        </div>
        <div class="d-flex flex-column text-center">
            <span class="subtitle">Trees Cut</span>
            <span class="stat-value" th:text="${playerCurrentStat.getTreesCut()}">62,467</span>
            <span class="delta-plus" th:if="${statDeltas != null}" th:text="${statDeltas.getTreesCutDeltaFormatted()}">+13</span>
        </div>
        <div class="d-flex flex-column text-end">
            <span class="subtitle">WN8</span>
            <span class="stat-value" th:text="${playerCurrentStat.getWN8()}">1,301.3</span>
            <span class="delta-plus" th:if="${statDeltas != null}" th:text="${statDeltas.getWn8DeltaFormatted()}">+0.9</span>
        </div>
    </div>
    <p>TODO: add xvm colors table, progress bar to next color and graphs...</p>
</section>
</body>
</html>
